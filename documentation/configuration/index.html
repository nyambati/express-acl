
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="This is documentation for express-acl project">
      
      
      
      
        <link rel="shortcut icon" href="../../favicon.ico">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.10.3">
    
    
      
        <title>Configuration options - Express Acl</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-9011e2d3f8.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Express Acl" class="md-header-nav__button md-logo">
          
            <i class="md-icon md-icon--home"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Documentation
                </span>
              
            
            Configuration options
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/andela-thomas/express-acl" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <div class="md-nav__button md-logo">
      
        <i class="md-icon md-icon--home"></i>
      
    </div>
    Express Acl
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/andela-thomas/express-acl" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Configuration options
      </label>
    
    <a href="./" title="Configuration options" class="md-nav__link md-nav__link--active">
      Configuration options
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#filename" title="Filename" class="md-nav__link">
    Filename
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#path" title="Path" class="md-nav__link">
    Path
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-type" title="File Type" class="md-nav__link">
    File Type
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encoding" title="Encoding" class="md-nav__link">
    Encoding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#base-url" title="Base URL" class="md-nav__link">
    Base URL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rules" title="Rules" class="md-nav__link">
    Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#default-role" title="Default Role" class="md-nav__link">
    Default Role
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#search-path-and-decoded-object-name" title="Search Path And Decoded Object Name" class="md-nav__link">
    Search Path And Decoded Object Name
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#decoded-object-name" title="Decoded Object Name" class="md-nav__link">
    Decoded Object Name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#search-path" title="Search Path" class="md-nav__link">
    Search Path
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../methods/" title="Api Methods" class="md-nav__link">
      Api Methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rules/" title="Acl Rules" class="md-nav__link">
      Acl Rules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../status-and-responses/" title="Status Codes and Responses" class="md-nav__link">
      Status Codes and Responses
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../contribution/" title="Contribution" class="md-nav__link">
      Contribution
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#filename" title="Filename" class="md-nav__link">
    Filename
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#path" title="Path" class="md-nav__link">
    Path
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-type" title="File Type" class="md-nav__link">
    File Type
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encoding" title="Encoding" class="md-nav__link">
    Encoding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#base-url" title="Base URL" class="md-nav__link">
    Base URL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rules" title="Rules" class="md-nav__link">
    Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#default-role" title="Default Role" class="md-nav__link">
    Default Role
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#search-path-and-decoded-object-name" title="Search Path And Decoded Object Name" class="md-nav__link">
    Search Path And Decoded Object Name
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#decoded-object-name" title="Decoded Object Name" class="md-nav__link">
    Decoded Object Name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#search-path" title="Search Path" class="md-nav__link">
    Search Path
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/andela-thomas/express-acl/edit/master/docs/documentation/configuration.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="overview">Overview</h1>
<p>This are the options that are passed to the config method. This options determin how the rules will be loaded and how resource matching should start from.</p>
<p>The config method takes in an object with possible five parameters, They include</p>
<ul>
<li>filename: <code>String</code></li>
<li>path: <code>String</code></li>
<li>yml: <code>boolean</code></li>
<li>baseUrl: <code>String</code></li>
<li>rules: <code>Object</code></li>
<li>defaultRole: <code>String</code></li>
<li>decodedObjectName: <code>String</code></li>
<li>searchPath: <code>String</code></li>
<li>encoding: <code>String</code></li>
<li>baseUrl: <code>String</code></li>
</ul>
<h2 id="filename">Filename</h2>
<p><code>filename: &lt;String&gt; [optional]</code></p>
<p>This property holds the name of the file that contains the acl configurations. By default express-acl will look for <code>nacl.json</code> or <code>nacl.yml</code> in the root folder of your project. If you plan to change the name you can specify the name of your file in this property.</p>
<div class="codehilite"><pre><span></span>  <span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;anotherFile.json&#39;</span>
  <span class="p">};</span>

  <span class="nx">acl</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</pre></div>


<p>Its important to note that the filename should have an extension attached to it e.g <code>.json</code> or <code>.yml</code>.</p>
<h2 id="path">Path</h2>
<p><code>path: &lt;String&gt; [optional]</code></p>
<p>This property specifies the location of the configuration file. By default the acl configuration file is located in the root folder of the project. However sometimes you may want to place this file among other configuration files of your project. You can achieve this by adding the location of the file relative to the root folder.</p>
<p>If the config folder is <code>/server/config</code>, then we can configure the path property as shown below.</p>
<div class="codehilite"><pre><span></span>  <span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="s1">&#39;acl.json&#39;</span><span class="p">,</span>
    <span class="nx">path</span><span class="o">:</span><span class="s1">&#39;server/config&#39;</span>
  <span class="p">};</span>

  <span class="nx">acl</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</pre></div>


<p>Basically what this means is that, you are instructing express-acl to go to the <code>server/config</code> folder and load the contents of <code>acl.json</code>.</p>
<h2 id="file-type">File Type</h2>
<p><code>yml: &lt;Boolean&gt; [optional]</code></p>
<p>Express acl supports two types of configuration syntax. <code>JSON</code> and <code>yml</code>. By default it uses JSON as its primary syntax, however you can change to whichever syntax that works for you.</p>
<p>This property is false by default therefore if you want to use <code>yml</code> as your syntax then change it to true. This will instruct express-acl to use a <code>YAML</code> parser instead of the <code>JSON</code> parser.</p>
<div class="codehilite"><pre><span></span>  <span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">filename</span><span class="o">:</span><span class="s1">&#39;acl.yml&#39;</span><span class="p">,</span>
    <span class="nx">path</span><span class="o">:</span><span class="s1">&#39;server/config&#39;</span><span class="p">,</span>
    <span class="nx">yml</span><span class="o">:</span><span class="kc">true</span>
  <span class="p">};</span>

  <span class="nx">acl</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</pre></div>


<h2 id="encoding">Encoding</h2>
<p><code>encoding: &lt;String&gt; [optional]</code></p>
<p>This is the encoding type <code>fs</code> module uses to read nacl file. For more information refer to the <a href="https://nodejs.org/api/fs.html">file system </a> Nodejs documentation.</p>
<h2 id="base-url">Base URL</h2>
<p><code>baseUrl: &lt;String&gt; [required]</code></p>
<p>The base URL represent the prefix of your API. This can either be <code>api</code>,<code>v1</code>,<code>/developer/v1</code> etc. This is important because express-acl will use this url to map the location of the resources. Take an example of the following url <code>/api/users</code>.</p>
<p>In this URL our resource is users,and the base URL being <code>api</code>. If we donot specify the base URL express will treat <code>api</code> as our resource instead of <code>users</code>.</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">filename</span><span class="o">:</span><span class="s1">&#39;acl.yml&#39;</span><span class="p">,</span>
  <span class="nx">path</span><span class="o">:</span><span class="s1">&#39;server/config&#39;</span><span class="p">,</span>
  <span class="nx">baseUrl</span><span class="o">:</span><span class="s1">&#39;api&#39;</span>
  <span class="nx">yml</span><span class="o">:</span><span class="kc">true</span>
<span class="p">};</span>

<span class="nx">acl</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</pre></div>


<h2 id="rules">Rules</h2>
<p><code>rules: &lt;String&gt; [optional]</code></p>
<p>If you are not willing to use either json file or yml configuration you can pass the config method an array of rules. This can be rules saved in an external source such as database or a js file in your project.</p>
<div class="codehilite"><pre><span></span><span class="kr">const</span> <span class="nx">arrayOfRules</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">group</span><span class="o">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nx">permissions</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nx">resource</span><span class="o">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
        <span class="nx">methods</span><span class="o">:</span> <span class="s2">&quot;*&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nx">action</span><span class="o">:</span> <span class="s2">&quot;allow&quot;</span>
  <span class="p">},</span>
<span class="p">];</span>


<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">baseUrl</span><span class="o">:</span><span class="s1">&#39;api&#39;</span><span class="p">,</span>
  <span class="nx">rules</span><span class="o">:</span> <span class="nx">ArrayOfRules</span><span class="p">,</span>
  <span class="nx">yml</span><span class="o">:</span><span class="kc">true</span>
<span class="p">};</span>

<span class="nx">acl</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</pre></div>


<h2 id="default-role">Default Role</h2>
<p><code>defaultRole: &lt;String&gt; [optional]</code></p>
<p>If You have a user in your system who has not been assigned a role, you can specify a role that will be assumed if such users exist. By the default this module will assign <code>guest</code> as a default role. You can override this by using <code>defaultRole</code> property.</p>
<div class="codehilite"><pre><span></span><span class="nx">acl</span><span class="p">.</span><span class="nx">config</span><span class="p">({</span>
    <span class="nx">yml</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">defaultRole</span><span class="o">:</span> <span class="s1">&#39;anonymous&#39;</span>
<span class="p">});</span>
</pre></div>


<h2 id="search-path-and-decoded-object-name">Search Path And Decoded Object Name</h2>
<p>This two properties enable you to customize how and where your user role will be located in the request object. By default this module looks for <code>req.decoded.role</code>, However this might be the case with everyone. if your decoed object uses different format you can specify using the above properties.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both of these properties are use to locate the role in your request object, therefore  they cannot be used together.
You can only use on of each in your configuration.</p>
</div>
<h3 id="decoded-object-name">Decoded Object Name</h3>
<p><code>decodedObjectName: &lt;String&gt; [optional]</code></p>
<p>You can use this method to specify the name of the object holding your user object, this can be user, session, etc. The default value for this is <code>decoded</code>.</p>
<div class="codehilite"><pre><span></span><span class="nx">acl</span><span class="p">.</span><span class="nx">config</span><span class="p">({</span>
    <span class="nx">yml</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">decodedObjectName</span><span class="o">:</span> <span class="s1">&#39;user&#39;</span>
<span class="p">});</span>
</pre></div>


<h3 id="search-path">Search Path</h3>
<p><code>searchPath: &lt;String&gt; [optional]</code></p>
<p>In some cases your user object can have the role name nested deep into your object. With the above config this module will look for the role name in <code>user.role</code>. If your role is nested in <code>user.role.name</code> you can specify this path as a search path so that this module can be able to find your role.</p>
<div class="codehilite"><pre><span></span><span class="nx">acl</span><span class="p">.</span><span class="nx">config</span><span class="p">({</span>
    <span class="nx">yml</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">searchPath</span><span class="o">:</span> <span class="s1">&#39;user.role.name&#39;</span>
<span class="p">});</span>
</pre></div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../getting-started/" title="Getting started" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Getting started
              </span>
            </div>
          </a>
        
        
          <a href="../methods/" title="Api Methods" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Api Methods
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-f3ab9e5ff8.js"></script>
      
      
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>